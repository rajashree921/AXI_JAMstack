<!DOCTYPE html>
<html lang="en">
  <script type="text/javascript">
  if (!sessionStorage.hasOwnProperty("fauna_emp_secret") {
    window.replace("/login");
  }
  </script>
  <head>
    <!-- Title -->
    <title>Apply Leave</title>
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <meta charset="UTF-8" />
    <!-- Styles -->
    <link
      type="text/css"
      rel="stylesheet"
      href="/assets/plugins/materialize/css/materialize.min.css"
    />
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    />
    <link
      href="/assets/plugins/material-preloader/css/materialPreloader.min.css"
      rel="stylesheet"
    />
     
    <!-- Theme Styles -->
    <link href="/assets/css/alpha.min.css" rel="stylesheet" type="text/css" />
    <link href="/assets/css/custom.css" rel="stylesheet" type="text/css" />
  </head>
  <body>
    <div class="loader-bg"></div>
    <div class="loader">
      <div class="preloader-wrapper big active">
        <div class="spinner-layer spinner-blue">
          <div class="circle-clipper left">
            <div class="circle"></div>
          </div>
          <div class="gap-patch">
            <div class="circle"></div>
          </div>
          <div class="circle-clipper right">
            <div class="circle"></div>
          </div>
        </div>
        <div class="spinner-layer spinner-spinner-teal lighten-1">
          <div class="circle-clipper left">
            <div class="circle"></div>
          </div>
          <div class="gap-patch">
            <div class="circle"></div>
          </div>
          <div class="circle-clipper right">
            <div class="circle"></div>
          </div>
        </div>
        <div class="spinner-layer spinner-yellow">
          <div class="circle-clipper left">
            <div class="circle"></div>
          </div>
          <div class="gap-patch">
            <div class="circle"></div>
          </div>
          <div class="circle-clipper right">
            <div class="circle"></div>
          </div>
        </div>
        <div class="spinner-layer spinner-green">
          <div class="circle-clipper left">
            <div class="circle"></div>
          </div>
          <div class="gap-patch">
            <div class="circle"></div>
          </div>
          <div class="circle-clipper right">
            <div class="circle"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="mn-content fixed-sidebar">
      <header class="mn-header navbar-fixed">
    <nav class="black darken-1">
      <div class="nav-wrapper">
        <section class="material-design-hamburger navigation-toggle">
          <a
            href="#"
            data-activates="slide-out"
            class="button-collapse show-on-large material-design-hamburger__icon"
          >
            <span class="material-design-hamburger__layer"></span>
          </a>
        </section>
        <img
        class="left hide-on-small-and-down"
        src="/assets/images/AXImprove-Full-Logo.png"
        width="200px"
      />
      <img
        class="left hide-on-med-and-up"
        src="/assets/images/small.png"
        height="60px"
      />
      &nbsp;&nbsp;&nbsp;
      <a
        style="font-size: 22px;"
        href="/"
        class="hide-on-small-and-down"
        id="title"
        >LEAVE MANAGEMENT SYSTEM</a
      >
      <a style="font-size: 22px;" href="/" class="hide-on-med-and-up"
        >L M S</a
      >
      
      </div>
    </nav>
  </header> 
      <aside id="slide-out" class="side-nav white fixed">
    <div class="side-nav-wrapper">
      <div class="sidebar-profile">
        <div class="sidebar-profile-image">
        
        
          <img
            src="/assets/images/m.png"
            alt="Male-Photo"
          />
        
        </div>
        <div class="sidebar-profile-info">
          <p id="name">
            Name
          </p>
          <span id="emp-id">AXI00X</span>        
        </div>
      </div>
      <ul
        class="sidebar-menu collapsible collapsible-accordion"
        data-collapsible="accordion"
      >
        <li class="no-padding">
          <a class="waves-effect waves-grey" href="/home"
            ><i class="material-icons">home</i>Home</a
          >
        </li>
        <li class="no-padding">
          <a href="/myprofile"
            ><i class="material-icons">account_box</i>My Profile</a
          >
        </li>
        <li class="no-padding">
          <a class="collapsible-header"
            ><i class="material-icons">apps</i>Leaves<i
              class="nav-drop-icon material-icons"
              >keyboard_arrow_right</i
            ></a
          >
          <div class="collapsible-body">
            <ul>
              <li><a href="/apply-leave">Apply Leave</a></li>
              <li><a href="/leave-history">Leave History</a></li>
            </ul>
          </div>
        </li>

        <li class="no-padding">
          <a href="#">
            <i class="material-icons">exit_to_app</i>
            Sign Out
          </a>
        </li>
      </ul>
    </div>
  </aside>
      
<main class="mn-inner">
  <div class="row">
    <div class="col s12 m12 l8">
      <div class="card">
        <div class="card-content">
          <h4 style="text-align: center;">Apply for Leave</h4>
          <form id="addl" method="post" name="addemp">
            <div class="row">
              <div class="col m12">
                <div class="row" style="text-align: center;">
                  <div class="input-field col s12">
                    <select name="leavetype" id="leavetype" autocomplete="off">
                      <option value="" selected disabled
                        >Select leave type...</option
                      >
                      <option>Medical Leave</option>
                    </select>
                  </div>
                  <div class="input-field col m6 s12">
                    <label for="fromdate" class="active">From Date</label>
                    <input
                      value="2020-04-22"
                      min="2020-04-22"
                      name="fromdate"
                      id="fromdate"
                      type="date"
                      required
                      autofocus
                    />
                  </div>
                  <div class="input-field col m6 s12">
                    <label for="todate" class="active">To Date</label>
                    <input
                      value="2020-04-22"
                      min="2020-04-22"
                      name="todate"
                      id="todate"
                      type="date"
                      required
                    />
                  </div>
                  <div
                    class="preloader-wrapper small active"
                    id="loaderIcon"
                    style="display: none;"
                  >
                    <div class="spinner-layer spinner-green-only">
                      <div class="circle-clipper left">
                        <div class="circle"></div>
                      </div>
                      <div class="gap-patch">
                        <div class="circle"></div>
                      </div>
                      <div class="circle-clipper right">
                        <div class="circle"></div>
                      </div>
                    </div>
                  </div>
                  <span
                    id="leave-availability"
                    style="font-size: 12px; color: red;"
                  ></span>
                  <div class="input-field col m12 s12">
                    <label for="description">Description</label>
                    <textarea
                      id="textarea1"
                      name="description"
                      class="materialize-textarea"
                      length="500"
                    ></textarea>
                  </div>
                </div>
                <button
                  type="submit"
                  name="apply"
                  id="apply"
                  class="waves-effect waves-light btn indigo m-b-xs right"
                >
                  Apply
                </button>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</main>

    </div>
    <script src="/assets/plugins/jquery/jquery-2.2.0.min.js"></script>
    <script src="/assets/plugins/materialize/js/materialize.min.js"></script>
    <script src="/assets/plugins/material-preloader/js/materialPreloader.min.js"></script>
    <script src="/assets/plugins/jquery-blockui/jquery.blockui.js"></script>
    <script src="/assets/js/alpha.min.js"></script>
    
<script>
  $(document).ready(function(){
    $(document).on('submit', '#addl', function(){
      var valid=true;
      if(!$("#leavetype").val()){
        alert('Please select Leave Type');
        valid=false;
      }
      $("#leave-availability").html("");
      if((new Date($("#fromdate").val()))>(new Date($("#todate").val()))){
        $("#leave-availability").html("FromDate cannot be greater than ToDate");
        valid=false;
      }
      var d1=new Date($("#fromdate").val()),
        d2=new Date($("#todate").val()),
        isWeekend = false;
      //valid=true;
      while(d1<=d2) {
        var day = d1.getDay();
        //alert(day);
        isWeekend = (day === 6) || (day === 0);
        if (isWeekend){
          valid=false;
          $("#leave-availability").html("Leave period includes weekend, please select another interval");
          break;
        }
        d1.setDate(d1.getDate() + 1);
      }
      var days=(Date.parse($("#todate").val()) - Date.parse($("#fromdate").val())) / 86400000 + 1;
      
      if(days>10){
        $("#leave-availability").html("Cannot take leave for longer than 10 days");
        valid=false;
      }
      return valid;
    });
  });
</script>

  </body>
</html>
